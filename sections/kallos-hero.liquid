<section class="kallos-hero" id="kallos-hero-{{ section.id }}">
  <div class="kallos-hero__inner">
    <div class="kallos-hero__text">
      <div class="kallos-hero__proof">
        <div class="kallos-hero__stars">
          {% for i in (1..5) %}
            <svg fill="currentColor" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 256">
              <path d="m234.29 114.85-45 38.83L203 211.75a16.4 16.4 0 0 1-24.5 17.82L128 198.49l-50.53 31.08A16.4 16.4 0 0 1 53 211.75l13.76-58.07-45-38.83A16.46 16.46 0 0 1 31.08 86l59-4.76 22.76-55.08a16.36 16.36 0 0 1 30.27 0l22.75 55.08 59 4.76a16.46 16.46 0 0 1 9.37 28.86Z"/>
            </svg>
          {% endfor %}
        </div>
        <div class="kallos-hero__clients">
          <strong>+{{ section.settings.client_count }}</strong> {{ section.settings.client_text }}
        </div>
      </div>

      <h1 class="kallos-hero__title">
        <span class="kallos-title-static">{{ section.settings.title_rich }}</span>
        <span class="kallos-title-inline">
          <span id="kallos-typed-{{ section.id }}"></span><span class="kallos-caret"></span>.
        </span>
      </h1>

      <div class="kallos-hero__desc">
        {{ section.settings.description_rich }}
      </div>
    </div>

    <div class="kallos-hero__media">
      {% if section.settings.img_main %}
        <img
          src="{{ section.settings.img_main | image_url: width: 900 }}"
          class="kallos-img kallos-img--main"
          loading="lazy"
        >
      {% endif %}
      {% if section.settings.img_secondary %}
        <img
          src="{{ section.settings.img_secondary | image_url: width: 700 }}"
          class="kallos-img kallos-img--secondary"
          loading="lazy"
        >
      {% endif %}
    </div>
  </div>
</section>

<style>
  .kallos-hero__media{
  width:50%;
  height:480px;
  position:relative;
}

.kallos-img{
  position:absolute;
  animation: float 6s ease-in-out infinite;
}

.kallos-img--main{
  width:68%;
  right:0;
  bottom:0;
  z-index:2;
}

.kallos-img--secondary{
  width:42%;
  right:25%;
  top:0;
  z-index:1;
}

@media(max-width:768px){
  .kallos-hero__media{
    width:100%;
    height:360px;
  }

  .kallos-img{
    position:relative;
    animation:none;
    display:block;
    margin:0 auto;
  }

  .kallos-img--secondary{
    display:none;
  }
}

</style>

<script>
(function(){
  var el = document.getElementById("kallos-typed-{{ section.id }}");
  if(!el) return;

  var words = [
    {% for block in section.blocks %}
      {{ block.settings.word | json }}{% unless forloop.last %},{% endunless %}
    {% endfor %}
  ];
  if(!words.length) words=["cejas"];

  var i=0, j=0, del=false;

  function tick(){
    var w = words[i];
    var current = w.slice(0, j);
    
    el.innerHTML = current.length > 0 ? current : "&nbsp;";

    if(!del && j < w.length){
      j++;
      setTimeout(tick, 120);
    } else if(del && j > 0){
      j--;
      setTimeout(tick, 60);
    } else if(!del && j === w.length){
      setTimeout(() => { del = true; tick(); }, 2000);
    } else if(del && j === 0){
      del = false;
      i = (i + 1) % words.length;
      setTimeout(tick, 400);
    }
  }
  tick();
})();
</script>

{% schema %}
{
  "name": "Kallos · Hero",
  "settings": [
    { "type": "color", "id": "gradient_color", "label": "Color degradado", "default": "#AC9651" },
    { "type": "color", "id": "text_color", "label": "Color texto", "default": "#FFFFFF" },
    { "type": "color", "id": "star_color", "label": "Color estrellas", "default": "#AC9651" },
    { "type": "text", "id": "client_count", "label": "Número clientes", "default": "10.000" },
    { "type": "text", "id": "client_text", "label": "Texto clientes", "default": "clientes Kallos" },
    { "type": "image_picker", "id": "img_main", "label": "Imagen principal" },
    { "type": "image_picker", "id": "img_secondary", "label": "Imagen secundaria" },
    {
      "type": "richtext",
      "id": "title_rich",
      "label": "Título",
      "default": "<p>Más confianza, Más</p>"
    },
    {
      "type": "richtext",
      "id": "description_rich",
      "label": "Descripción",
      "default": "<p>Kallos. Líder en crecimiento capilar y cuidado de la piel.</p>"
    }
  ],
  "blocks": [
    {
      "type": "word",
      "name": "Palabra animada",
      "settings": [{ "type": "text", "id": "word", "label": "Texto", "default": "cejas" }]
    }
  ],
  "presets": [{ "name": "Kallos · Hero" }]
}
{% endschema %}